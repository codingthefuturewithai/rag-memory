# ================================================================================
# PRODUCTION ENVIRONMENT - .env.prod
# ================================================================================
# Use this file when testing the production Docker Compose setup locally.
# This emulates a new user deploying RAG Memory without cloud infrastructure.
#
# USAGE:
#   docker-compose --env-file .env.prod -f docker-compose.prod.yml up -d
#
# Or explicitly source (optional - recommended for CLI):
#   source .env.prod && docker-compose -f docker-compose.prod.yml up -d
#
# Then run CLI commands:
#   uv run rag status
#   uv run rag search "query"
# ================================================================================

# OpenAI API Key (required for embedding generation)
OPENAI_API_KEY=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

# ================================================================================
# PostgreSQL - Production Instance (docker-compose.prod.yml)
# ================================================================================
# Host port that docker-compose uses (change here to use different host port)
# Using 54350 to avoid conflicts with dev/test (54320/54323) and Supabase (54321-54327)
PROD_POSTGRES_PORT=54350

POSTGRES_HOST=localhost
POSTGRES_PORT=${PROD_POSTGRES_PORT}
POSTGRES_USER=raguser
POSTGRES_PASSWORD=ragpassword
POSTGRES_DB=rag_memory

DATABASE_URL=postgresql://raguser:ragpassword@localhost:${PROD_POSTGRES_PORT}/rag_memory

# ================================================================================
# Neo4j - Production Instance (docker-compose.prod.yml)
# ================================================================================
# Host ports that docker-compose uses (change here to use different host ports)
# Using 7500/7700 to avoid conflicts with dev/test (7474-7691) and local Java process
PROD_NEO4J_HTTP_PORT=7500
PROD_NEO4J_BOLT_PORT=7700

NEO4J_URI=bolt://localhost:${PROD_NEO4J_BOLT_PORT}
NEO4J_USER=neo4j
NEO4J_PASSWORD=graphiti-password

# ================================================================================
# MCP Server - Production Instance (docker-compose.prod.yml)
# ================================================================================
# Host port that docker-compose uses for the SSE endpoint
# Using 8888 to avoid conflicts with rag_api (8000) and supabase_kong (8001)
PROD_MCP_PORT=8888

# ================================================================================
# Automated Backups Configuration (backup sidecar in docker-compose.prod.yml)
# ================================================================================
# Location where daily backups are stored (relative to project root)
BACKUP_ARCHIVE_DIR=./backups

# Backup schedule (cron format: 5 2 * * * = 2:05 AM daily)
BACKUP_CRON_SCHEDULE=30 22 * * *

# Note: Backup compression is optional. If not needed, remove BACKUP_COMPRESSION env var from docker-compose
# The backup service will use sensible defaults if not specified.

# Optional: Retention days (0 = keep all)
BACKUP_RETENTION_DAYS=30

# ================================================================================
# PRODUCTION PROTECTION - Production Mode
# ================================================================================
# These are REAL production servers - handle data with care
ENV_NAME=production
ENVIRONMENT=production
